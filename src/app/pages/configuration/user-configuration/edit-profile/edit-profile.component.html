<div class="edit-profile-container">
  <div class="edit-profile-header">
    <div class="back-button" (click)="goBack()">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-left">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <path d="M5 12l14 0" />
        <path d="M5 12l6 6" />
        <path d="M5 12l6 -6" />
      </svg>
      <h1>{{ 'edit-profile.edit' | translate }}</h1>
    </div>
  </div>

  <form (ngSubmit)="saveChanges()" class="edit-profile-form">
    <div class="profile-picture-section">
      <div class="profile-picture">
        <img [src]="previewUrl" alt="Foto de perfil" class="profile-image">
      </div>
      <div class="profile-picture-actions">
        <h2>{{ profileData.username }}</h2>
        <label for="file-upload" class="change-photo-btn">{{ 'edit-profile.change-image' | translate }}</label>
        <input id="file-upload" type="file" accept="image/*" (change)="onFileSelected($event)" class="file-input">
      </div>
    </div>

    <div class="form-group">
      <label for="username">{{ 'edit-profile.username' | translate }}</label>
      <div class="input-container">
        <input
          type="text"
          id="username"
          name="username"
          [(ngModel)]="profileData.username"
          (input)="onUsernameInput()"
          placeholder="Nombre de usuario">
        <span class="field-info">
          {{ 'edit-profile.username-info' | translate }}
        </span>
        <span class="field-info" *ngIf="usernameAvailabilityMessage">
          {{ usernameAvailabilityMessage }}
        </span>
      </div>
    </div>

    <div class="form-group">
      <label for="description">{{ 'edit-profile.description' | translate }}</label>
      <div class="input-container">
        <textarea
          id="description"
          name="description"
          [(ngModel)]="profileData.description"
          (input)="onDescriptionInput()"
          placeholder="Descripción"
          maxlength="150"
          rows="4"></textarea>
        <span class="field-info">
          {{ getDescriptionLength() }}/{{ maxDescriptionLength }}
        </span>
      </div>
    </div>

    <div class="form-actions">
      <button type="submit" class="save-button">{{ 'edit-profile.send' | translate }}</button>
    </div>
  </form>

  <!-- Componente de confirmación con textos dinámicos -->
  <app-confirmation-question
    [title]="getConfirmationTitle() | translate"
    [message]="getConfirmationMessage() | translate"
    [confirmText]="getConfirmText() | translate"
    [cancelText]="getCancelText() | translate"
    [visible]="showConfirmation"
    (confirm)="onConfirm()"
    (cancel)="onCancel()">
  </app-confirmation-question>
</div>

