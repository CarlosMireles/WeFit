<div class="overlay" (click)="onClose()">
  <div class="modal-window" (click)="$event.stopPropagation()">
    <h2 *ngIf="!isEditing">Detalle del Evento</h2>
    <h2 *ngIf="isEditing">Editar Evento</h2>

    <!-- T铆tulo -->
    <label>Nombre:</label>
    <div class="field"  *ngIf="!isEditing">{{ eventData.title }}</div>
    <input *ngIf="isEditing" type="text" [(ngModel)]="editData.title" />

    <!-- Descripci贸n -->
    <label>Descripci贸n:</label>
    <div class="field" *ngIf="!isEditing">{{ eventData.description }}</div>
    <textarea *ngIf="isEditing" [(ngModel)]="editData.description"></textarea>

    <!-- Deporte -->
    <label>Deporte:</label>
    <div class="field" *ngIf="!isEditing">{{ eventData.sport }}</div>
    <select *ngIf="isEditing" [(ngModel)]="editData.sport">
      <option *ngFor="let sport of sports" [value]="sport">{{ sport }}</option>
    </select>

    <!-- Fecha -->
    <label>Fecha:</label>
    <div class="field" *ngIf="!isEditing">{{ eventData.day }}</div>
    <input *ngIf="isEditing" type="date" [(ngModel)]="editData.day" />

    <!-- Hora -->
    <label>Hora:</label>
    <div class="field" *ngIf="!isEditing">{{ eventData.hour }}</div>
    <input *ngIf="isEditing" type="text" [(ngModel)]="editData.hour" />

    <!-- Participantes -->
    <label>Participantes:</label>
    <div class="field" *ngIf="!isEditing">
      <div class="participants-count">
        {{ eventData.participants.length }} / {{ eventData.maxParticipants }}
      </div>
      <div class="participants-container">
        <ul class="participants-list">
          <li *ngFor="let name of participantNames">{{ name }}</li>
        </ul>
      </div>
    </div>
    <input *ngIf="isEditing" type="number" [(ngModel)]="editData.maxParticipants" min="1" max="200" />

    <!-- Privacidad -->
    <label>Privacidad:</label>
    <div class="field" *ngIf="!isEditing">{{ eventData.privacy }}</div>
    <select *ngIf="isEditing" [(ngModel)]="editData.privacy">
      <option value="P煤blico">P煤blico</option>
      <option value="Privado">Privado</option>
      <option value="Mejores amigos">Mejores amigos</option>
    </select>

    <!-- Botones -->
    <div class="buttons">

      <!-- Propietario - Ver -->
      <div *ngIf="isOwner && !isEditing" class="owner-actions">
        <button type="button" class="btn-edit" (click)="editEvent()">Modificar evento</button>
      </div>

      <!-- Modo edici贸n -->
      <div *ngIf="isEditing" class="edit-actions">
        <button type="button" class="btn-save" (click)="showConfirmDialog = true">Guardar cambios</button>
        <button type="button" class="btn-cancel" (click)="cancelEdit()">Cancelar</button>
      </div>

      <!-- Usuario no propietario -->
      <div *ngIf="!isOwner && !isEditing" class="user-actions">
        <button *ngIf="hasJoined" type="button" class="btn-leave" (click)="leaveEvent()"> Desinscribirse del evento</button>
        <button *ngIf="!hasJoined && canJoin" type="button" class="btn-join" (click)="joinEvent()">Unirse al evento</button>
        <button *ngIf="!hasJoined && !canJoin" type="button" class="btn-disabled" disabled>No puedes unirte al evento</button>
      </div>

      <!-- Bot贸n de cerrar -->
      <div class="close-action">
        <button type="button" class="btn-close" (click)="onClose()">Cerrar</button>
      </div>

      <!-- Di谩logo de confirmaci贸n -->
      <app-confirm-dialog
        *ngIf="showConfirmDialog"
        [message]="'驴Deseas guardar los cambios?'"
        (confirm)="onConfirmSave()"
        (cancel)="showConfirmDialog = false">
      </app-confirm-dialog>

    </div>
  </div>
</div>
